<html>
    <head></head>
    <body>
        <form name="publish">
            <input type="text" name="message">
            <input type="submit" value="Send">
        </form>
        <div id="messages"></div>
        
        <script>
            let socket = new WebSocket("ws://192.168.4.1/ws");

            document.forms.publish.onsubmit = function() {
                let outgoingMessage = this.message.value;

                socket.send(outgoingMessage);
                return false;
            };

            socket.onmessage = function(event) {
                let message = event.data;

                let messageElem = document.createElement('div');
                messageElem.textContent = message;
                document.getElementById('messages').prepend(messageElem);
            };

            socket.onerror = function(error) {
            alert(`[error] ${error.message}`);
            };
        </script>
    </body>
</html>